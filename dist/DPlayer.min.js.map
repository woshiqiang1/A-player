{"version":3,"sources":["DPlayer.js"],"names":["_classCallCheck","instance","Constructor","TypeError","_createClass","defineProperties","target","props","i","length","descriptor","enumerable","configurable","writable","Object","defineProperty","key","protoProps","staticProps","prototype","DPlayer","option","_this","this","svg","play","pause","volume-up","volume-down","volume-off","loop","full","isMobile","navigator","userAgent","match","autoplay","defaultOption","element","document","getElementsByClassName","theme","defaultKey","hasOwnProperty","audios","secondToTime","second","add0","num","min","parseInt","sec","updateBar","type","percentage","direction","style","eventTypes","event","_iteratorNormalCompletion","_didIteratorError","_iteratorError","undefined","_step","_iterator","Symbol","iterator","next","done","value","err","trigger","_iteratorNormalCompletion2","_didIteratorError2","_iteratorError2","_step2","_iterator2","func","_this2","playedBar","loadedBar","thumb","bar","barWidth","addEventListener","e","window","clientWidth","clientX","getElementViewLeft","innerHTML","audio","duration","currentTime","parseFloat","width","background","thumbMove","showlrc","updateLrc","thumbUp","removeEventListener","clearInterval","playedTime","loopEle","classList","add","multiple","remove","buffered","end","ended","volume","height","indexMusic","_this3","paused","button","setTimeout","setInterval","_this4","name","push","module","exports"],"mappings":"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","file":"DPlayer.min.js","sourcesContent":["(() => {\r\n\r\n  class DPlayer {\r\n  /**\r\n   * DPlayer constructor function\r\n   *\r\n   * @param {Object} option - See README\r\n   * @constructor\r\n   */\r\n  constructor(option) {\r\n      this.svg = {\r\n          'play': ['0 0 16 32', 'M15.552 15.168q0.448 0.32 0.448 0.832 0 0.448-0.448 0.768l-13.696 8.512q-0.768 0.512-1.312 0.192t-0.544-1.28v-16.448q0-0.96 0.544-1.28t1.312 0.192z'],\r\n          'pause': ['0 0 17 32', 'M14.080 4.8q2.88 0 2.88 2.048v18.24q0 2.112-2.88 2.112t-2.88-2.112v-18.24q0-2.048 2.88-2.048zM2.88 4.8q2.88 0 2.88 2.048v18.24q0 2.112-2.88 2.112t-2.88-2.112v-18.24q0-2.048 2.88-2.048z'],\r\n          'volume-up': ['0 0 30 32', 'M13.728 6.272v19.456q0 0.448-0.352 0.8t-0.8 0.32-0.8-0.32l-5.952-5.952h-4.672q-0.48 0-0.8-0.352t-0.352-0.8v-6.848q0-0.48 0.352-0.8t0.8-0.352h4.672l5.952-5.952q0.32-0.32 0.8-0.32t0.8 0.32 0.352 0.8zM20.576 16q0 1.344-0.768 2.528t-2.016 1.664q-0.16 0.096-0.448 0.096-0.448 0-0.8-0.32t-0.32-0.832q0-0.384 0.192-0.64t0.544-0.448 0.608-0.384 0.512-0.64 0.192-1.024-0.192-1.024-0.512-0.64-0.608-0.384-0.544-0.448-0.192-0.64q0-0.48 0.32-0.832t0.8-0.32q0.288 0 0.448 0.096 1.248 0.48 2.016 1.664t0.768 2.528zM25.152 16q0 2.72-1.536 5.056t-4 3.36q-0.256 0.096-0.448 0.096-0.48 0-0.832-0.352t-0.32-0.8q0-0.704 0.672-1.056 1.024-0.512 1.376-0.8 1.312-0.96 2.048-2.4t0.736-3.104-0.736-3.104-2.048-2.4q-0.352-0.288-1.376-0.8-0.672-0.352-0.672-1.056 0-0.448 0.32-0.8t0.8-0.352q0.224 0 0.48 0.096 2.496 1.056 4 3.36t1.536 5.056zM29.728 16q0 4.096-2.272 7.552t-6.048 5.056q-0.224 0.096-0.448 0.096-0.48 0-0.832-0.352t-0.32-0.8q0-0.64 0.704-1.056 0.128-0.064 0.384-0.192t0.416-0.192q0.8-0.448 1.44-0.896 2.208-1.632 3.456-4.064t1.216-5.152-1.216-5.152-3.456-4.064q-0.64-0.448-1.44-0.896-0.128-0.096-0.416-0.192t-0.384-0.192q-0.704-0.416-0.704-1.056 0-0.448 0.32-0.8t0.832-0.352q0.224 0 0.448 0.096 3.776 1.632 6.048 5.056t2.272 7.552z'],\r\n          'volume-down': ['0 0 21 32', 'M13.728 6.272v19.456q0 0.448-0.352 0.8t-0.8 0.32-0.8-0.32l-5.952-5.952h-4.672q-0.48 0-0.8-0.352t-0.352-0.8v-6.848q0-0.48 0.352-0.8t0.8-0.352h4.672l5.952-5.952q0.32-0.32 0.8-0.32t0.8 0.32 0.352 0.8zM20.576 16q0 1.344-0.768 2.528t-2.016 1.664q-0.16 0.096-0.448 0.096-0.448 0-0.8-0.32t-0.32-0.832q0-0.384 0.192-0.64t0.544-0.448 0.608-0.384 0.512-0.64 0.192-1.024-0.192-1.024-0.512-0.64-0.608-0.384-0.544-0.448-0.192-0.64q0-0.48 0.32-0.832t0.8-0.32q0.288 0 0.448 0.096 1.248 0.48 2.016 1.664t0.768 2.528z'],\r\n          'volume-off': ['0 0 14 32', 'M13.728 6.272v19.456q0 0.448-0.352 0.8t-0.8 0.32-0.8-0.32l-5.952-5.952h-4.672q-0.48 0-0.8-0.352t-0.352-0.8v-6.848q0-0.48 0.352-0.8t0.8-0.352h4.672l5.952-5.952q0.32-0.32 0.8-0.32t0.8 0.32 0.352 0.8z'],\r\n          'loop': ['0 0 32 32', 'M1.882 16.941c0 4.152 3.221 7.529 7.177 7.529v1.882c-4.996 0-9.060-4.222-9.060-9.412s4.064-9.412 9.060-9.412h7.96l-3.098-3.098 1.331-1.331 5.372 5.37-5.37 5.372-1.333-1.333 3.1-3.098h-7.962c-3.957 0-7.177 3.377-7.177 7.529zM22.94 7.529v1.882c3.957 0 7.177 3.377 7.177 7.529s-3.221 7.529-7.177 7.529h-7.962l3.098-3.098-1.331-1.331-5.37 5.37 5.372 5.372 1.331-1.331-3.1-3.1h7.96c4.998 0 9.062-4.222 9.062-9.412s-4.064-9.412-9.060-9.412z'],\r\n          'full': ['0 0 32 32', 'M6.667 28h-5.333c-0.8 0-1.333-0.533-1.333-1.333v-5.333c0-0.8 0.533-1.333 1.333-1.333s1.333 0.533 1.333 1.333v4h4c0.8 0 1.333 0.533 1.333 1.333s-0.533 1.333-1.333 1.333zM30.667 28h-5.333c-0.8 0-1.333-0.533-1.333-1.333s0.533-1.333 1.333-1.333h4v-4c0-0.8 0.533-1.333 1.333-1.333s1.333 0.533 1.333 1.333v5.333c0 0.8-0.533 1.333-1.333 1.333zM30.667 12c-0.8 0-1.333-0.533-1.333-1.333v-4h-4c-0.8 0-1.333-0.533-1.333-1.333s0.533-1.333 1.333-1.333h5.333c0.8 0 1.333 0.533 1.333 1.333v5.333c0 0.8-0.533 1.333-1.333 1.333zM1.333 12c-0.8 0-1.333-0.533-1.333-1.333v-5.333c0-0.8 0.533-1.333 1.333-1.333h5.333c0.8 0 1.333 0.533 1.333 1.333s-0.533 1.333-1.333 1.333h-4v4c0 0.8-0.533 1.333-1.333 1.333z']\r\n      };\r\n\r\n      this.isMobile = navigator.userAgent.match(/(iPad)|(iPhone)|(iPod)|(android)|(webOS)/i);\r\n      // compatibility: some mobile browsers don't suppose autoplay\r\n      if (this.isMobile) {\r\n          option.autoplay = false;\r\n      }\r\n\r\n      // default options\r\n      const defaultOption = {\r\n          element: document.getElementsByClassName('dplayer')[0],\r\n          autoplay: false,\r\n          theme: '#b7daff'\r\n      };\r\n      for (let defaultKey in defaultOption) {\r\n          if (defaultOption.hasOwnProperty(defaultKey) && !option.hasOwnProperty(defaultKey)) {\r\n              option[defaultKey] = defaultOption[defaultKey];\r\n          }\r\n      }\r\n\r\n      this.option = option;\r\n      this.audios = [];\r\n      this.loop = true;\r\n\r\n      /**\r\n       * Parse second to 00:00 format\r\n       *\r\n       * @param {Number} second\r\n       * @return {String} 00:00 format\r\n       */\r\n      this.secondToTime = (second) => {\r\n          const add0 = (num) => {\r\n              return num < 10 ? '0' + num : '' + num;\r\n          };\r\n          const min = parseInt(second / 60);\r\n          const sec = parseInt(second - min * 60);\r\n          return add0(min) + ':' + add0(sec);\r\n      };\r\n\r\n      /**\r\n       * Update progress bar, including loading progress bar and play progress bar\r\n       *\r\n       * @param {String} type - Point out which bar it is, should be played loaded or volume\r\n       * @param {Number} percentage\r\n       * @param {String} direction - Point out the direction of this bar, Should be height or width\r\n       */\r\n      this.updateBar = (type, percentage, direction) => {\r\n          percentage = percentage > 0 ? percentage : 0;\r\n          percentage = percentage < 1 ? percentage : 1;\r\n          this[type + 'Bar'].style[direction] = percentage * 100 + '%';\r\n      };\r\n\r\n      // define DPlayer events\r\n      this.eventTypes = ['play', 'pause', 'canplay', 'playing', 'ended', 'error'];\r\n      this.event = {};\r\n      for (let type of this.eventTypes) {\r\n          this.event[type] = [];\r\n      }\r\n      this.trigger = (type) => {\r\n          for (let func of this.event[type]) {\r\n              func();\r\n          }\r\n      }\r\n  };\r\n\r\n  /**\r\n   * AutoLink initialization function\r\n   */\r\n  init() {\r\n      this.element = this.option.element;\r\n\r\n      // control play progress\r\n      this.playedBar = this.element.getElementsByClassName('dplayer-played')[0];\r\n      this.loadedBar = this.element.getElementsByClassName('dplayer-loaded')[0];\r\n      this.thumb = this.element.getElementsByClassName('dplayer-thumb')[0];\r\n      this.bar = this.element.getElementsByClassName('dplayer-bar')[0];\r\n      let barWidth;\r\n      this.bar.addEventListener('click', (event) => {\r\n          const e = event || window.event;\r\n          barWidth = this.bar.clientWidth;\r\n          const percentage = (e.clientX - getElementViewLeft(this.bar)) / barWidth;\r\n          this.updateBar('played', percentage, 'width');\r\n          this.element.getElementsByClassName('dplayer-ptime')[0].innerHTML = this.secondToTime(percentage * this.audio.duration);\r\n          this.audio.currentTime = parseFloat(this.playedBar.style.width) / 100 * this.audio.duration;\r\n      });\r\n\r\n      this.thumb.addEventListener('mouseover', () => {\r\n          this.thumb.style.background = this.option.theme;\r\n      });\r\n      this.thumb.addEventListener('mouseout', () => {\r\n          this.thumb.style.background = '#fff';\r\n      });\r\n\r\n      const thumbMove = (event) => {\r\n          const e = event || window.event;\r\n          let percentage = (e.clientX - getElementViewLeft(this.bar)) / barWidth;\r\n          percentage = percentage > 0 ? percentage : 0;\r\n          percentage = percentage < 1 ? percentage : 1;\r\n          this.updateBar('played', percentage, 'width');\r\n          if (this.option.showlrc) {\r\n              this.updateLrc(parseFloat(this.playedBar.style.width) / 100 * this.audio.duration);\r\n          }\r\n          this.element.getElementsByClassName('dplayer-ptime')[0].innerHTML = this.secondToTime(percentage * this.audio.duration);\r\n      };\r\n\r\n      const thumbUp = () => {\r\n          document.removeEventListener('mouseup', thumbUp);\r\n          document.removeEventListener('mousemove', thumbMove);\r\n          this.audio.currentTime = parseFloat(this.playedBar.style.width) / 100 * this.audio.duration;\r\n          this.play();\r\n      };\r\n\r\n      this.thumb.addEventListener('mousedown', () => {\r\n          barWidth = this.bar.clientWidth;\r\n          clearInterval(this.playedTime);\r\n          document.addEventListener('mousemove', thumbMove);\r\n          document.addEventListener('mouseup', thumbUp);\r\n      });\r\n\r\n      // control volume\r\n      // this.volumeBar = this.element.getElementsByClassName('dplayer-volume')[0];\r\n      // const volumeBarWrap = this.element.getElementsByClassName('dplayer-volume-bar')[0];\r\n      // const volumeicon = this.element.getElementsByClassName('dplayer-time')[0].getElementsByTagName('i')[0];\r\n      // const barHeight = 35;\r\n      // this.element.getElementsByClassName('dplayer-volume-bar-wrap')[0].addEventListener('click', (event) => {\r\n      //     const e = event || window.event;\r\n      //     let percentage = (barHeight - e.clientY + getElementViewTop(volumeBarWrap)) / barHeight;\r\n      //     percentage = percentage > 0 ? percentage : 0;\r\n      //     percentage = percentage < 1 ? percentage : 1;\r\n      //     this.updateBar('volume', percentage, 'height');\r\n      //     this.audio.volume = percentage;\r\n      //     if (this.audio.muted) {\r\n      //         this.audio.muted = false;\r\n      //     }\r\n      //     if (percentage === 1) {\r\n      //         volumeicon.className = 'demo-icon dplayer-icon-volume-up';\r\n      //     }\r\n      //     else {\r\n      //         volumeicon.className = 'demo-icon dplayer-icon-volume-down';\r\n      //     }\r\n      // });\r\n      // volumeicon.addEventListener('click', () => {\r\n      //     if (this.audio.muted) {\r\n      //         this.audio.muted = false;\r\n      //         volumeicon.className = this.audio.volume === 1 ? 'demo-icon dplayer-icon-volume-up' : 'demo-icon dplayer-icon-volume-down';\r\n      //         this.updateBar('volume', this.audio.volume, 'height');\r\n      //     }\r\n      //     else {\r\n      //         this.audio.muted = true;\r\n      //         volumeicon.className = 'demo-icon dplayer-icon-volume-off';\r\n      //         this.updateBar('volume', 0, 'height');\r\n      //     }\r\n      // });\r\n\r\n      // get element's view position\r\n      // function getElementViewLeft(element) {\r\n      //     let actualLeft = element.offsetLeft;\r\n      //     let current = element.offsetParent;\r\n      //     let elementScrollLeft;\r\n      //     while (current !== null) {\r\n      //         actualLeft += current.offsetLeft;\r\n      //         current = current.offsetParent;\r\n      //     }\r\n      //     elementScrollLeft = document.body.scrollLeft + document.documentElement.scrollLeft;\r\n      //     return actualLeft - elementScrollLeft;\r\n      // }\r\n      //\r\n      // function getElementViewTop(element) {\r\n      //     let actualTop = element.offsetTop;\r\n      //     let current = element.offsetParent;\r\n      //     let elementScrollTop;\r\n      //     while (current !== null) {\r\n      //         actualTop += current.offsetTop;\r\n      //         current = current.offsetParent;\r\n      //     }\r\n      //     elementScrollTop = document.body.scrollTop + document.documentElement.scrollTop;\r\n      //     return actualTop - elementScrollTop;\r\n      // }\r\n\r\n      // loop control\r\n      const loopEle = this.element.getElementsByClassName('dplayer-looploop')[0];\r\n      loopEle.addEventListener('click', () => {\r\n          if (this.loop) {\r\n              loopEle.classList.add('dplayer-noloop');\r\n              this.loop = false;\r\n              this.audio.loop = this.multiple ? false : this.loop;\r\n          }\r\n          else {\r\n              loopEle.classList.remove('dplayer-noloop');\r\n              this.loop = true;\r\n              this.audio.loop = this.multiple ? false : this.loop;\r\n          }\r\n      });\r\n\r\n      // get this audio object\r\n      this.audio = this.element.getElementsByClassName('dplayer-video')[0];\r\n\r\n      // show audio time: the metadata has loaded or changed\r\n      this.audio.addEventListener('durationchange', () => {\r\n          if (this.audio.duration !== 1) {           // compatibility: Android browsers will output 1 at first\r\n              this.element.getElementsByClassName('dplayer-dtime')[0].innerHTML = this.secondToTime(this.audio.duration);\r\n          }\r\n      });\r\n\r\n      // show audio loaded bar: to inform interested parties of progress downloading the media\r\n      this.audio.addEventListener('progress', () => {\r\n          const percentage = this.audio.buffered.length ? this.audio.buffered.end(this.audio.buffered.length - 1) / this.audio.duration : 0;\r\n          this.updateBar('loaded', percentage, 'width');\r\n      });\r\n\r\n      // audio download error: an error occurs\r\n      this.audio.addEventListener('error', () => {\r\n          this.element.getElementsByClassName('dplayer-author')[0].innerHTML = ` - Error happens ╥﹏╥`;\r\n          this.trigger('pause');\r\n      });\r\n\r\n      // audio can play: enough data is available that the media can be played\r\n      this.audio.addEventListener('canplay', () => {\r\n          this.trigger('canplay');\r\n      });\r\n\r\n      // multiple music play\r\n      this.ended = false;\r\n      this.audio.addEventListener('ended', () => {\r\n          if (!this.loop) {\r\n              this.ended = true;\r\n              this.pause();\r\n              this.trigger('ended');\r\n          }\r\n      });\r\n\r\n      // control volume\r\n      this.audio.volume = parseInt(this.element.getElementsByClassName('dplayer-volume')[0].style.height) / 100;\r\n\r\n      // loop\r\n      this.audio.loop = this.multiple ? false : this.loop;\r\n\r\n      if (this.multiple) {\r\n          this.audios[indexMusic] = this.audio;\r\n      }\r\n\r\n      // set duration time\r\n      if (this.audio.duration !== 1) {           // compatibility: Android browsers will output 1 at first\r\n          this.element.getElementsByClassName('dplayer-dtime')[0].innerHTML = this.audio.duration ? this.secondToTime(this.audio.duration) : '00:00';\r\n      }\r\n\r\n      // autoplay\r\n      if (this.option.autoplay && !this.isMobile) {\r\n          this.play();\r\n      }\r\n      this.option.autoplay = true;  // autoplay next music\r\n\r\n      if (this.isMobile) {\r\n          this.pause();\r\n      }\r\n  }\r\n\r\n  /**\r\n   * Play music\r\n   */\r\n  play() {\r\n      if (this.audio.paused) {\r\n          this.button.classList.remove('dplayer-play');\r\n          this.button.classList.add('dplayer-pause');\r\n          this.button.innerHTML = '';\r\n          setTimeout(() => {\r\n              this.button.innerHTML = '<i class=\"demo-icon dplayer-icon-pause\"></i>';\r\n          }, 100);\r\n\r\n          this.audio.play();\r\n          if (this.playedTime) {\r\n              clearInterval(this.playedTime);\r\n          }\r\n          this.playedTime = setInterval(() => {\r\n              this.updateBar('played', this.audio.currentTime / this.audio.duration, 'width');\r\n              if (this.option.showlrc) {\r\n                  this.updateLrc();\r\n              }\r\n              this.element.getElementsByClassName('dplayer-ptime')[0].innerHTML = this.secondToTime(this.audio.currentTime);\r\n              this.trigger('playing');\r\n          }, 100);\r\n          this.trigger('play');\r\n      }\r\n  }\r\n\r\n  /**\r\n   * Pause music\r\n   */\r\n  pause() {\r\n      if (!this.audio.paused || this.ended) {\r\n          this.ended = false;\r\n          this.button.classList.remove('dplayer-pause');\r\n          this.button.classList.add('dplayer-play');\r\n          this.button.innerHTML = '';\r\n          setTimeout(() => {\r\n              this.button.innerHTML = '<i class=\"demo-icon dplayer-icon-play\"></i>';\r\n          }, 100);\r\n          this.audio.pause();\r\n          clearInterval(this.playedTime);\r\n          this.trigger('pause');\r\n      }\r\n  }\r\n\r\n  /**\r\n   * attach event\r\n   */\r\n  on(name, func) {\r\n      if (typeof func === 'function') {\r\n          this.event[name].push(func);\r\n      }\r\n  }\r\n}\r\n\r\nif (typeof module !== 'undefined' && typeof module.exports !== 'undefined') {\r\n  module.exports = DPlayer\r\n}\r\nelse {\r\n  window.DPlayer = DPlayer;\r\n}\r\n})();"]}